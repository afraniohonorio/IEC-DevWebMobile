<!DOCTYPE html>
<html>
	<head>
		<title>Trabalho Prático WEB Mobile</title>
		<meta charset="utf-8">

<!--[if lt IE 9]>
<script src="http://html5shiv.googlecode.com/svn/trunk/html5.js">
</script>
<![endif]-->
<script src="https://ajax.googleapis.com/ajax/libs/jquery/1.11.3/jquery.min.js"></script>
<script type="text/javascript">
$(function(){ 
	listaUsuarios = localStorage.getItem("listaUsuarios");// Recupera os dados armazenados 
	listaUsuarios = JSON.parse(listaUsuarios); // Converte string para objeto 
	ListarUsuarios(); 
});

function ListarUsuarios(){	
	$("#lista").html(""); 
	$("#lista").html( "<thead>"+ "	<tr>"+ 
		"	<th></th>"+	"	<th>Código</th>"+ "	<th>Nome</th>"+ "	<th>Email</th>"+ 
		"	</tr>"+ "</thead>"); 
	for(var i in listaUsuarios){ 
		var usuario = JSON.parse(listaUsuarios[i]); 
		$("#lista").append("<tr>"+ 
			"   <td><a href='editar.html?codigo="+i+"'>Editar</a>"+
			"    <a href='apagar.html?codigo="+i+"'>Apagar</a></td>" + 
			"	<td>"+i+"</td>" + 
			"	<td>"+usuario.Primeiro+"</td>" + 
			"   <td>"+usuario.Email+"</td>" + 
			"   </tr>"); 
	} 
} 
function Excluir(){ 
	listaUsuarios.splice(codigo, 1); 
	localStorage.setItem("listaUsuarios", JSON.stringify(listaUsuarios)); 
	alert("Registro excluído."); 
}

$("#lista").on("click", ".btnExcluir", function(){ 
	codigo = parseInt($(this).attr("alt")); 
	Excluir(); 
	ListarUsuarios(); 
});


</script>

<style>
	body {font-family: Verdana, sans-serif; font-size:0.8em;}
	 nav, section, article, footer
		{border:1px solid grey; margin:5px; padding:8px;}
	nav ul {margin:0; padding:0;}
	nav ul li {display:inline; margin:5px;}
</style>
	</head>

<body>

	<header>
		<h1>Trabalho Prático WEB Mobie</h1>
	</header>

	<nav>
		<ul>
  			<li><a href="lista.html">Lista de Usuários</a></li>
  			<li><a href="index.html">Cadastro de Usuários</a></li>
  		</ul>
	</nav>

	<section>

	<h2>Lista de Usuários</h2>
	<article>
		<table id="lista">

		</table>
	</article>

	</section>

<footer>
<p>&copy; 2015. Todos os direitos reservados</p>
</footer>

</body>
</html>
